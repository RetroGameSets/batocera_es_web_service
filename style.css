:root{
  --gap: 16px;
  --card-bg: #2b3036;
  --card-border: rgba(255,255,255,.08);
  --card-shadow: 0 4px 12px rgba(0,0,0,.25);
  --card-shadow-hover: 0 10px 20px rgba(0,0,0,.35);
  --radius: 10px;

  --sys-h: 64px;
  --sys-pad: 8px;
  --sys-gap: 10px;
  --sys-bg: #21262d;
  --sys-border: rgba(255,255,255,.08);
  --sys-accent: #58a6ff;
  --sys-pin: #ffc107;

  --toolbar-top: 64px;
}

/* --- Overrides to fix pager layout and current logo sizing --- */
/* Keep pager controls on a single line with horizontal arrows */
.bottom-bar .pager { flex-wrap: nowrap !important; }

/* Prevent overflow from current section; ensure system logo fits */
.currentborder { overflow: hidden; }
.currentborder #sysName img { max-height: 28px; max-width: 100%; width: auto; height: auto; object-fit: contain; display: inline-block; vertical-align: middle; }

* { margin:0; padding:0; font-family: 'Open Sans', sans-serif; font-size:12pt; color:#FFFFFF; }
html, body { height: 100%; overflow-x: hidden; }
body { background: radial-gradient(1200px 600px at 50% 60%, #2c3350 0%, #1f2a3d 50%, #1b202c 100%) fixed; color: #e8ecef; min-width: 100%; min-height: 100vh; padding-top: 56px; padding-bottom: 120px; overflow-x: hidden; }
body.padded { padding-top: var(--total-top-pad, 118px); padding-bottom: var(--bottom-pad, 92px); }
body > div.row { display: block !important; margin: 0 !important; width: 100% !important; }
#gameList { display: block !important; width: 100% !important; max-width: 100% !important; box-sizing: border-box; }
#jumbo { max-width: 60vw; color: #d1d7de; font-size: .9rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
#jumbo img { max-height: 40px; height: auto; width: auto; object-fit: contain; }
.currentborder #sysName img { max-height: 24px; width: auto; height: auto; object-fit: contain; }
.sysName { color:#efefef; font-size:14px; font-weight:700; text-transform:uppercase; cursor:pointer; max-width: 600px; }
.gameName { color:#ffffff; font-size:14px; font-weight:800; text-transform:uppercase; cursor:pointer; max-width: 600px; }
.currentborder { border: 2px solid #CFCFCF; border-radius: 5px; padding: 3px; margin: 3px; }
.imgArt { max-width: 100%; height: auto; }
#jumbo .imgArt { max-height: 44px; width: auto; height: auto; object-fit: contain; }
#gameList > .row { display: grid !important; grid-template-columns: repeat(auto-fill, minmax(190px, 1fr)); gap: var(--gap); width: 100%; margin: 0 auto !important; padding: var(--gap); box-sizing: border-box; align-items: stretch; }
/* List view */
.list-container { display: flex; flex-direction: column; gap: 6px; padding: 8px; }
.list-item { display: grid; grid-template-columns: 64px minmax(0,1fr) auto; gap: 10px; align-items: center; padding: 8px; border: 1px solid rgba(255,255,255,.08); border-radius: 8px; background: var(--card-bg); }
.list-item .li-thumb img { width: 64px; height: 48px; object-fit: cover; border-radius: 4px; }
.list-item .li-main { min-width: 0; }
.list-item .li-title { font-weight: 600; font-size: .95rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; }
.list-item .li-meta { font-size: .8rem; color: #aab3bb; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.list-item .li-actions { white-space: nowrap; justify-self: end; display: inline-flex; }
.list-item .li-actions .btn { padding: .2rem .45rem; margin-left: 6px; vertical-align: middle; }
.card.card-game { background: var(--card-bg) !important; border: 1px solid var(--card-border) !important; border-radius: var(--radius) !important; box-shadow: var(--card-shadow); display: flex; flex-direction: column; overflow: hidden !important; transition: transform .15s ease, box-shadow .15s ease; min-width: 0; }
.card.card-game:hover { transform: translateY(-2px); box-shadow: var(--card-shadow-hover); }
.card-img-top.card-img-150 { height: 180px !important; object-fit: cover; width: 100%; }
.card-title-50 { height: 50px !important; object-fit: contain; object-position: center; background: rgba(255,255,255,.03); border-bottom: 1px solid rgba(255,255,255,.06); padding: 6px; }
.card-game .card-title.text-center { font-weight: 600; font-size: .95rem; padding: 8px 10px 0 10px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.card-game .card-text { padding: 6px 10px 0 10px; color: #cfd6dd; overflow: hidden !important; }
.card-game .card-text p { margin: 0 0 4px 0; font-size: .85rem; }
.card-game .fa { color: #ffc107; }
.card-game .card-footer { border-top: 1px solid rgba(255,255,255,.06); background: transparent; display: flex; gap: 6px; justify-content: center; align-items: center; margin-top: auto; padding: 10px; }
.card-game .btn { padding: .25rem .6rem; }
.card-game.fav { outline: 2px solid #ffc10755; }
.modal-content { background-color: #0f172a; color: #e5e7eb; border: 1px solid rgba(255,255,255,.08); }
.modal-header, .modal-footer { border-color: rgba(255,255,255,.1); }
.modal-title { color: #cbd5e1; }
.modal-body { color: #e5e7eb; max-height: calc(90vh - 140px); overflow-y: auto; }
#detailModalImg { border-radius: 6px; object-fit: cover; width: 100%; max-height: 320px; }
#detailModalBody { color: #cbd5e1; }
.modal#detailModal .modal-dialog { max-width: min(1100px, 72vw); width: 72vw; }
.detail-facts { display: grid; grid-template-columns: 160px 1fr; gap: 6px 12px; margin-top: 8px; }
.detail-facts .df-row { display: contents; }
.detail-facts .df-label { color:#9aa6b2; font-size:.9rem; text-align: right; white-space: nowrap; }
.detail-facts .df-value { color:#e5e7eb; font-size:.95rem; min-width:0; display: inline-block; vertical-align: middle; }
.detail-facts .df-row:nth-child(n) .df-value { display: inline-block; }
.detail-facts .df-value .ra-badge { margin-left: 2px; }
.detail-facts .df-value .fa { margin-right: 6px; vertical-align: baseline; }
.detail-facts .df-value .ra-badge { display: inline-block; padding: 2px 8px; border: 1px solid rgba(255,255,255,.12); border-radius: 999px; background: rgba(255,255,255,.05); line-height: 1; white-space: nowrap; }
.detail-facts .df-value .ra-badge .fa.ra-icon { margin-right: 6px; color: #fbbf24; vertical-align: middle; }
@media (max-width: 768px){
  .modal#detailModal .modal-dialog { margin: 0; max-width: 100%; width: 100%; height: 100%; }
  .modal#detailModal .modal-content { height: 100%; border-radius: 0; }
}
.detail-facts code.path { background:#0b1220; color:#a5b4fc; padding:2px 6px; border-radius:4px; border:1px solid rgba(255,255,255,.08); word-break: break-all; }
@media (max-width: 576px){ .detail-facts { grid-template-columns: 1fr; } .detail-facts .df-label { text-align:left; opacity:.9; } .detail-media-links { margin-left: 0; } }
.detail-media-links { margin-top: 10px; display: flex; gap: 8px; align-items: center; flex-wrap: wrap; margin-left: 172px; }
.detail-media-links .btn-icon { display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; border-radius: 6px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.05); color: #e5e7eb; text-decoration: none; }
.detail-media-links .btn-icon:hover { background: rgba(255,255,255,.12); text-decoration: none; }

/* Footer alignment: media buttons left, actions right */
.modal-footer { display: flex; align-items: center; justify-content: space-between; gap: 8px; flex-wrap: wrap; }
.modal-footer .modal-media-left { display: inline-flex; align-items: center; gap: 8px; margin-right: auto; }
.modal-footer .media-btn i { vertical-align: middle; }
.close { color: #e5e7eb; text-shadow: none; opacity: .85; }
.close:hover { opacity: 1; }
.modal-backdrop.show { opacity: .65; }
.toolbar { position: fixed; top: var(--toolbar-top, 64px); left: 0; right: 0; z-index: 1030; background: rgba(33,37,41,.98); border-bottom: 1px solid rgba(255,255,255,.08); padding: .35rem .75rem; color: #e8ecef; backdrop-filter: blur(4px); box-shadow: 0 8px 20px rgba(0,0,0,.35); }
.toolbar.hidden { display: none !important; }
.tools { display: flex; align-items: center; gap: .5rem .75rem; flex-wrap: wrap; overflow-x: visible; -webkit-overflow-scrolling: touch; }
.tools .form-control, .tools .custom-select { width: auto; display: inline-block; min-width: 0; background:#1b1f24; color:#e2e8f0; border:1px solid rgba(255,255,255,.12); }
.tools .form-control-sm, .tools .custom-select-sm { height: calc(1.5em + .5rem + 2px); padding: .25rem .5rem; }
.tools .form-control:focus, .tools .custom-select:focus { background:#111827; color:#e5e7eb; border-color:#3b82f6; box-shadow: 0 0 0 .2rem rgba(59,130,246,.25); }
.label { color:#9aa6b2; font-size:.85rem; margin-right:.25rem; white-space: nowrap; }
#search { flex: 1 1 420px; min-width: 200px; max-width: 100%; }
#sort { flex: 1 1 220px; min-width: 160px; }
#page-size { flex: 0 1 120px; min-width: 100px; }
.ck-group { flex: 0 1 auto; white-space: nowrap; display: flex; align-items: center; gap: .6rem; }
.ck-group input { margin-right: .25rem; }
.spacer { flex: 1 1 100%; min-width: 0; height: 0; }
.summary { color:#adb5bd; font-size:.9rem; white-space: nowrap; }
.btn-min { padding: .2rem .5rem; line-height:1.2; }
.pager { display:flex; align-items:center; justify-content:center; gap:.35rem; margin: .3rem 0 0; flex-wrap: wrap; }
.pager .btn { padding: .15rem .45rem; }
#systemList { width: 100%; }
nav.navbar.fixed-bottom { overflow: visible; }
nav.navbar.fixed-bottom > .mx-auto { width: 100%; }
/* Bottom pager bar above systems dock */
.bottom-bar { display:flex; align-items:center; justify-content:space-between; gap:.5rem; padding: 4px 8px; border-top: 1px solid rgba(255,255,255,.08); background: rgba(33,37,41,.9); white-space: nowrap; overflow-x: auto; -webkit-overflow-scrolling: touch; }
.bottom-bar .summary { margin-right: .5rem; }
.bottom-bar .pager { margin: 0; gap:.25rem; display:flex; align-items:center; white-space:nowrap; }
.bottom-bar .pager .btn { padding: .1rem .35rem; line-height: 1.1; }
.bottom-bar select { max-width: 120px; background:#1b1f24; color:#e2e8f0; border:1px solid rgba(255,255,255,.12); }
nav.navbar.fixed-top .navbar-nav > .nav-item { margin-right: .5rem; }
nav.navbar.fixed-top .navbar-brand { margin-right: .75rem; }
/* Keep +/- zoom on one line */
.zoom-group { display: inline-flex; gap: 6px; white-space: nowrap; }
.zoom-group > button { display: inline-block; }
/* Improve vertical spacing in hamburger (collapsed) menu */
nav.navbar.fixed-top .navbar-collapse.show .navbar-nav > .nav-item { margin: 6px 8px; }
nav.navbar.fixed-top .navbar-collapse.show .navbar-nav > .nav-item .btn { width: 100%; }
#sysbar { position: relative; width: 100vw; max-width: 100%; padding: 6px 44px; box-sizing: border-box; margin-left: calc(50% - 50vw); }
.sys-toolbar{ display:flex; align-items:center; gap:8px; margin: 2px 0 6px 0; flex-wrap:wrap; }
.sys-toolbar input[type="search"]{ min-width: 160px; border-radius: 6px; border: 1px solid var(--sys-border); background: #1b1f24; color: #e2e8f0; padding: 2px 6px; font-size: .85rem; }
.sys-toolbar select, .sys-toolbar button { border-radius: 6px; border: 1px solid var(--sys-border); background: #1b1f24; color: #e2e8f0; padding: 2px 8px; font-size: .85rem; }
.sys-toolbar .spacer { flex:1 1 auto; }
.sys-clip{ position: relative; overflow-x: auto; overflow-y: hidden; padding-bottom: 2px; }
.sys-strip{ display:flex; align-items:center; gap: var(--sys-gap); overflow-x:auto; overflow-y:hidden; -webkit-overflow-scrolling:touch; scroll-behavior:smooth; padding:4px 0; margin-bottom:-16px; padding-bottom:16px; }
.sys-item{ position:relative; height:var(--sys-h); min-width:calc(var(--sys-h) * 1.7); max-width:240px; display:inline-flex; align-items:center; justify-content:center; background:var(--sys-bg); border:1px solid var(--sys-border); border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,.25); padding:var(--sys-pad); user-select:none; cursor:pointer; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease; overflow:hidden; }
.sys-item:hover{ transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,.35); }
.sys-item.active{ outline: 2px solid var(--sys-accent); }
.sys-item.running{ box-shadow: 0 0 0 2px var(--sys-accent) inset, 0 10px 20px rgba(0,0,0,.4); }
.sys-item img{ height: calc(var(--sys-h) - 2*var(--sys-pad)); width:100%; object-fit:contain; object-position:center; filter: drop-shadow(0 2px 2px rgba(0,0,0,.25)); pointer-events:none; }
.sys-item .fallback{ font-weight:600; font-size:.9rem; color:#e2e8f0; text-align:center; padding:0 6px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.pin{ position:absolute; top:4px; right:6px; color:var(--sys-pin); font-size:16px; text-shadow:0 2px 4px rgba(0,0,0,.4); opacity:.9; }
.count{ position:absolute; bottom:2px; right:6px; font-size:.75rem; color:#cbd5e1; background:rgba(0,0,0,.35); padding:2px 6px; border-radius:12px; border:1px solid rgba(255,255,255,.12); }
.recent{ position:absolute; bottom:2px; left:6px; font-size:.7rem; color:#9ae6b4; background:rgba(0,0,0,.35); padding:2px 6px; border-radius:12px; border:1px solid rgba(255,255,255,.12); }
.sys-arrow{ position:absolute; top:50%; transform:translateY(-50%); width:36px; height:36px; border-radius:50%; border:1px solid var(--sys-border); background:rgba(20,22,27,.75); color:#e2e8f0; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:1031; transition: background .12s ease, transform .12s ease; }
.sys-arrow:hover{ background:rgba(20,22,27,.95); transform:translateY(-50%) scale(1.05); }
.sys-arrow.left{ left:8px; } .sys-arrow.right{ right:8px; }
.hide-scrollbars, .hide-scrollbars * { scrollbar-width: none !important; }
.hide-scrollbars::-webkit-scrollbar, .hide-scrollbars *::-webkit-scrollbar { width:0 !important; height:0 !important; background:transparent !important; }
.thin-scrollbars, .thin-scrollbars * { scrollbar-width: thin; scrollbar-color: rgba(255,255,255,.25) transparent; }
.thin-scrollbars::-webkit-scrollbar, .thin-scrollbars *::-webkit-scrollbar { width:6px; height:6px; }
.thin-scrollbars *::-webkit-scrollbar-thumb { background: rgba(255,255,255,.25); border-radius:6px; }
.thin-scrollbars *::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,.35); }
.thin-scrollbars *::-webkit-scrollbar-track { background: transparent; }

/* --- Mobile responsiveness tweaks --- */
@media (max-width: 768px) {
  :root { --gap: 12px; }
  #gameList > .row { grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); padding: 12px; gap: 12px; }
  .card-img-top.card-img-150 { height: clamp(120px, 45vw, 220px) !important; }
  .card-title-50 { height: 44px !important; padding: 4px; }
  .toolbar { padding: .3rem .55rem; }
  .tools { gap: .45rem .5rem; }
  .label { display: none; }
  #search { flex: 1 1 100%; min-width: 0; max-width: 100%; }
  #sort { flex: 1 1 48%; min-width: 0; }
  #page-size { flex: 1 1 48%; min-width: 0; }
  .ck-group { flex: 1 1 100%; gap: .5rem; }
  .summary { flex: 1 1 100%; text-align: center; }
  .spacer { display: none; }

  /* Current (running) section spans full width; allow wrapping */
  #jumbo { max-width: 100vw; white-space: normal; }
  .gameName { white-space: normal; }

  /* Systems dock: tighter spacing and snap scrolling */
  :root { --sys-h: 58px; --sys-gap: 8px; }
  .sys-strip { scroll-snap-type: x mandatory; }
  .sys-item { scroll-snap-align: center; min-width: calc(var(--sys-h) * 2.1); }
  .sys-toolbar label[for="sb-mode"],
  .sys-toolbar #sb-mode,
  .sys-toolbar input#sys-filter { display: none; }
  .bottom-bar { gap:.35rem; padding: 3px 6px; }
  .bottom-bar .summary { font-size: .85rem; }
  .bottom-bar select { max-width: 100px; }
}

@media (max-width: 480px) {
  .bottom-bar { gap:.3rem; padding: 3px 5px; }
  .bottom-bar .summary { font-size: .8rem; }
  .bottom-bar select { max-width: 90px; }
  .toolbar { padding: .25rem .45rem; }
  .tools { gap: .4rem .45rem; }
  #search { flex: 1 1 100%; }
  #sort, #page-size { flex: 1 1 100%; }
  .ck-group { flex-direction: row; flex-wrap: wrap; }
  .pager { justify-content: center; }
  #gameList > .row { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); padding: 10px; gap: 10px; }
  .card-img-top.card-img-150 { height: clamp(120px, 55vw, 220px) !important; }
  .card-game .btn { padding: .22rem .5rem; }
  /* Systems dock even more compact */
  :root { --sys-h: 54px; --sys-gap: 6px; }
  .sys-item { min-width: calc(var(--sys-h) * 2.2); }
  /* List view tweaks */
  .list-item { grid-template-columns: 56px 1fr auto; gap: 8px; padding: 8px; }
  .list-item .li-thumb img { width: 56px; height: 42px; }
}
